<!DOCTYPE html>
<html lang="en"><head>
<script src="slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="slides_files/libs/quarto-html/popper.min.js"></script>
<script src="slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/quarto-syntax-highlighting-66ab7fd5e73b7f0a764e0d49b3e29ab1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.13">

  <meta name="author" content="Jonas Skjold Raaschou-Pedersen">
  <title>Super Learning</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/theme/quarto-bbe7401fe57d4b791b917637bb662036.css">
  <link href="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Super Learning</h1>
  <p class="subtitle">ü¶∏ü¶∏ü¶∏ | 2025-03-10 | <a href="https://kurser.ku.dk/course/nmak24008u/2024-2025">Targeted Learning</a></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jonas Skjold Raaschou-Pedersen 
</div>
</div>
</div>

</section>
<section id="setup" class="slide level2">
<h2>Setup</h2>
<ul>
<li><p>Data <span class="math inline">\(O = (W, A, Y) \sim P_{0}\)</span>; observe <span class="math inline">\(n\)</span> i.i.d. observations <span class="math inline">\(O_{1},
\ldots, O_{n}\)</span></p></li>
<li><p>Target parameter is the causal risk difference under causal assumptions: <span class="math display">\[\begin{align*}
\Psi(P_{0})
&amp; = E_{W, 0}\left[ E_{0}(Y \mid A = 1, W)
- E_{0}(Y \mid A = 0, W) \right]           \\
&amp; = \int_{\mathcal{W}} \left\{
\bar{Q}_{0}(1, w) - \bar{Q}_{0}(0, w) \right\}
Q_{W, 0}(dw)
\\
&amp; = \Psi(Q_{0})
\end{align*}\]</span> where <span class="math display">\[\begin{align}
\bar{Q}_{0}(A, W) := E_{0}(Y \mid A, W),
\end{align}\]</span> <span class="math inline">\(Q_{W, 0}\)</span> is the marginal distribution of <span class="math inline">\(W\)</span> under <span class="math inline">\(Q_{0}\)</span> and <span class="math inline">\(Q_{0} = (\bar{Q}_{0}, Q_{W, 0})\)</span>.</p></li>
<li><p>Target parameter <span class="math inline">\(\Psi(P_{0})\)</span> only depends on <span class="math inline">\(P_{0}\)</span> through conditional mean <span class="math inline">\(\bar{Q}_{0}(A, W)\)</span> and marginal distribution <span class="math inline">\(Q_{W, 0}\)</span>.</p></li>
</ul>
</section>
<section id="target-parameter-and-algorithm" class="slide level2">
<h2>Target parameter and algorithm</h2>
<ul>
<li><p>Empirical measure <span class="math inline">\(Q_{W, n}\)</span> estimates marginal distribution <span class="math inline">\(Q_{W, 0}\)</span> (‚Äúnonparametric maximum likelihood estimator‚Äù); focus on estimator <span class="math inline">\(\bar{Q}_{n}\)</span> of <span class="math inline">\(\bar{Q}_{0}\)</span></p></li>
<li><p>Plug <span class="math inline">\(Q_{n} = (\bar{Q}_{n}, Q_{W, n})\)</span> into <span class="math inline">\(\Psi(\cdot)\)</span> (‚Äúnon-targeted substitution estimator‚Äù) <span class="math display">\[\begin{align}
\psi_{n} = \Psi(Q_{n}) = \frac{1}{n}
\sum_{i=1}^{n} \{\bar{Q}_{n}(1, W_{i}) - \bar{Q}_{n}(0, W_{i})\}
\end{align}\]</span></p></li>
<li><p>Want an automated algorithm to nonparametrically (or semiparametrically) estimate <span class="math inline">\(\bar{Q}_{0}(A, W)\)</span></p></li>
<li><p>An <em>algorithm</em> is an estimator of <span class="math inline">\(\bar{Q}_{0}\)</span> that maps a data set <span class="math inline">\(\{(W_{i}, A_{i}, Y_{i})\}_{i=1}^{n}\)</span> into a <em>prediction function</em> that can be used to map input <span class="math inline">\((A, W)\)</span> into a predicted value <span class="math inline">\(Y\)</span></p></li>
<li><p>Want to find best algorithm to estimate the <em>function</em> <span class="math display">\[\begin{align*}
\bar{Q}_{0} : (A, W) \to \bar{Q}_{0}(A, W)
\end{align*}\]</span></p></li>
</ul>
</section>
<section id="best-algorithm" class="slide level2">
<h2>Best algorithm</h2>
<ul>
<li><p>Can define ‚Äúbest‚Äù in terms of a loss function, which assigns a measure of performance to a candidate function <span class="math inline">\(\bar{Q}\)</span> when applied to an observation <span class="math inline">\(O\)</span>, i.e. <span class="math display">\[\begin{align*}
L : (O, \bar{Q}) \to L(O, \bar{Q}) \in \mathbb{R}.
\end{align*}\]</span> It is a function of the random variable <span class="math inline">\(O\)</span> and parameter value <span class="math inline">\(\bar{Q}\)</span>.</p></li>
<li><p>E.g. squared error or negative log loss <span class="math display">\[\begin{align*}
L(O, \bar{Q}) &amp; = [Y - \bar{Q}(A, W)]^{2} \\
L(O, \bar{Q}) &amp; = - \log [
\bar{Q}(A, W)^{Y}
\left\{ 1 - \bar{Q}(A, W) \right\}^{1 - Y}
]
\end{align*}\]</span></p></li>
<li><p>For binary <span class="math inline">\(Y\)</span>, both the squared error and negative log loss target the same function, namely <span class="math inline">\(\bar{Q}_{0}(A, W) = E_{0}(Y \mid A, W) = P_{0}(Y = 1 \mid A, W)\)</span></p></li>
</ul>
</section>
<section id="loss-function-and-risk" class="slide level2">
<h2>Loss function and risk</h2>
<ul>
<li><p>A loss function defines a function <span class="math inline">\(\bar{Q}_{0}\)</span> that has the optimal performance with respect to that loss function among all candidate functions <span class="math inline">\(\bar{Q}\)</span></p></li>
<li><p>We can define our parameter of interest, <span class="math inline">\(\bar{Q}_{0}(A, W) = E_{0}(Y \mid A, W)\)</span>, as the <em>minimizer</em> of the expected squared error loss: <span class="math display">\[\begin{align}
\bar{Q}_{0} =
\underset{\bar{Q}}{\arg\min} \ E_{0} L(O, \bar{Q})
= \underset{\bar{Q}}{\arg\min} \ E_{0} [Y - \bar{Q}(A, W)]^{2}
\end{align}\]</span></p></li>
<li><p>The expected loss <span class="math inline">\(R(\bar{Q}) := E_{0} L(O, \bar{Q})\)</span> is denoted the <strong>risk</strong></p>
<ul>
<li>It evaluates the candidates <span class="math inline">\(\bar{Q}\)</span> and is minimized by the optimal choice <span class="math inline">\(\bar{Q}_{0}\)</span></li>
<li>We want the risk to be as small as possible.</li>
</ul></li>
<li><p>‚ÄúBest‚Äù algorithm: want the estimator of the regression function <span class="math inline">\(\bar{Q}_{0}\)</span> whose realized value minimizes the expectation of the squared error loss function.</p></li>
</ul>
</section>
<section id="finding-the-best-algorithm" class="slide level2">
<h2>Finding the best algorithm</h2>
<ul>
<li>The following is just paraphrasing these great <a href="https://vanderlaan-lab.org/teach-files/BASS_sec1_3.1.pdf">slides</a> by Eric Polley</li>
<li>For candidates <span class="math inline">\(\bar{Q}_{n}^{k}\)</span>, <span class="math inline">\(k = 1, \ldots, K\)</span>, we prefer the estimator for which the risk <span class="math display">\[\begin{align}
R(\bar{Q}^{k}_{n}) = E_{0} L(O, \bar{Q}^{k}_{n}) = \int L(O,
\bar{Q}^{k}_{n})
dP_{0}
\end{align}\]</span> is the smallest (depends on unobserved true <span class="math inline">\(P_{0}\)</span>)</li>
<li><em>Empirical</em> risk estimate: <span class="math display">\[\begin{align*}
    R_{n}(\bar{Q}_{n}) := P_{n} L(O, \bar{Q}_{n}) =
    \int L(O, \bar{Q}_{n}) dP_{n}
    = \frac{1}{n} \sum_{i=1}^{n} L(O_{i}, \bar{Q}_{n})
\end{align*}\]</span></li>
<li>Problem: <span class="math inline">\(\bar{Q}_{n}\)</span> was fit using the same data as to estimate its risk. Need external data to evaluate estimators.</li>
<li>Use cross-validation to estimate risk of estimator. Data divided into <span class="math inline">\(V\)</span> sets of size <span class="math inline">\(\sim \frac{n}{V}\)</span></li>
</ul>
</section>
<section id="cross-validation" class="slide level2">
<h2>Cross-validation</h2>
<ul>
<li><p>For e.g.&nbsp;<span class="math inline">\(V = 10\)</span> we have training and validation samples <span class="math inline">\((\mathcal{T}_{1},
\mathcal{V}_{1}), \ldots, (\mathcal{T}_{10}, \mathcal{V}_{10})\)</span> where <span class="math inline">\(\mathcal{T}_{i}\)</span> and <span class="math inline">\(\mathcal{V}_{i}\)</span> of size <span class="math inline">\(n_{t}\)</span> and <span class="math inline">\(n_{v}\)</span>, respectively</p></li>
<li><p>Fit learner on training sample <span class="math inline">\(\mathcal{T}_{j}\)</span>, denote resulting learner by <span class="math inline">\(\bar{Q}_{n, j}\)</span>, and compute its risk on corresponding validation sample <span class="math inline">\(\mathcal{V}_{j}\)</span>; denote the risk estimate by <span class="math display">\[\begin{equation}
    R_{n, j}(\bar{Q}_{n, j})
    = \frac{1}{n_{v}}
    \sum_{i \in \mathcal{V}_{j}}
    L(O_{i}, \bar{Q}_{n, j})
    = \frac{1}{n_{v}}
    \sum_{i \in \mathcal{V}_{j}}
    \{Y_{i} - \bar{Q}_{n, j}(A_{i}, W_{i})\}^{2}
\end{equation}\]</span></p></li>
<li><p>The cross-validated risk (CV risk) is the average risk over the folds <span class="math display">\[\begin{align*}
    R_{\mathrm{CV}, n}(\bar{Q}_{n}) := \frac{1}{V} \sum_{v = 1}^{V} R_{n,
                    v}(\bar{Q}_{n, v})
\end{align*}\]</span></p></li>
<li><p>CV risk provides a close approximation of the true risk of an estimator</p></li>
</ul>
</section>
<section id="data-splits" class="slide level2">
<h2>Data splits</h2>

<img data-src="figs/trainval.png" class="quarto-figure quarto-figure-center r-stretch"><p>Figure from Eric Polley‚Äôs <a href="https://vanderlaan-lab.org/teach-files/BASS_sec1_3.1.pdf">slides</a>.</p>
</section>
<section id="discrete-super-learner" class="slide level2">
<h2>Discrete Super Learner</h2>
<ul>
<li>Choose the estimator with the lowest estimated cross-validated risk</li>
<li>Have <span class="math inline">\(K\)</span> estimators <span class="math inline">\(\bar{Q}_{n}^{k}\)</span>, <span class="math inline">\(k = 1, \ldots, K\)</span>, each with their CV risk estimate <span class="math inline">\(R_{\mathrm{CV}, n}(\bar{Q}^{k}_{n})\)</span></li>
<li>Let <span class="math display">\[\begin{align*}
    k_{n}^{\mathrm{cv}}
    :=
    \underset{k}{\arg\min} \ R_{\mathrm{CV}, n}(\bar{Q}^{k}_{n})
\end{align*}\]</span></li>
</ul>
<p>be the index of the estimator with the smallest CV risk.</p>
<ul>
<li>The corresponding estimator <span class="math inline">\(\bar{Q}^{k_{n}^{\mathrm{cv}}}_{n}\)</span> is the <strong>discrete super learner</strong></li>
</ul>
</section>
<section id="oracle-selector" class="slide level2">
<h2>Oracle Selector</h2>
<ul>
<li>The best among all candidate estimators is the oracle selector <span class="math display">\[\begin{align*}
    k_{n}^{\mathrm{or}}
    :=
    \underset{k}{\arg\min} \ \frac{1}{V} \sum_{v = 1}^{V} R(\bar{Q}^{k}_{n, v}),
\end{align*}\]</span></li>
</ul>
<p>which depends on the true risk <span class="math inline">\(R(\cdot)\)</span> and is therefore unknown in practice</p>
<ul>
<li><p>It serves as a benchmark; can compare performance of <span class="math inline">\(\bar{Q}^{k_{n}^{\mathrm{cv}}}_{n, v}\)</span> to <span class="math inline">\(\bar{Q}^{k_{n}^{\mathrm{or}}}_{n,
v}\)</span></p></li>
<li><p><a href="https://www.degruyter.com/document/doi/10.1524/stnd.2006.24.3.351/html">van der Vaart, Dudoit &amp; van der Laan (2006)</a> shows an oracle inequality saying that the discrete super learner is essentially as close to the truth as the oracle, and the number of algorithms <span class="math inline">\(K\)</span> is allowed to be very large</p>
<ul>
<li>We can include any model choice in our ensemble of algorithms</li>
<li>Oracle inequality ensures that super learner chooses the correct one</li>
</ul></li>
</ul>
</section>
<section id="super-learner" class="slide level2">
<h2>Super Learner</h2>
<ul>
<li>The Discrete super learner <span class="math inline">\(\bar{Q}^{k_{n}^{\mathrm{cv}}}_{n, v}\)</span> is the best candidate estimator measured by the CV risk. Howeover, maybe different estimator capture different features of the data.</li>
<li>Can gain from taking linear combination of candidate estimators instead of picking just one (model stacking)</li>
<li>Convex combination of candidate estimators <span class="math inline">\(\bar{Q}_{n}^{1}, \ldots,
\bar{Q}_{n}^{K}\)</span>: <span class="math display">\[\begin{align*}
    \bar{Q}_{n}^{\omega} := \sum_{k = 1}^{K} \omega_{k} \bar{Q}_{n}^{k},
    \quad \text{with } \omega_{k} \geq 0 \text{  and  } \sum_{k = 1}^{K} \omega_{k} = 1.
\end{align*}\]</span></li>
<li>Can find a combination that minimizes cross-validated risk <span class="math display">\[\begin{align*}
    \omega^{\mathrm{cv}}_{n}
    := \underset{\omega}{\arg\min} \ \frac{1}{V} \sum_{v=1}^{V} R_{n}(\bar{Q}_{n, v}^{\omega})
\end{align*}\]</span></li>
</ul>
</section>
<section id="super-learner-1" class="slide level2">
<h2>Super Learner</h2>
<ul>
<li><p>The estimator corresponding to the convex combination <span class="math inline">\(\omega^{\mathrm{cv}}_{n}\)</span> of estimators is <span class="math inline">\(\bar{Q}_{n}^{\omega^{\mathrm{cv}}_{n}}
    = \sum_{k = 1}^{K} \omega^{\mathrm{cv}}_{n, k} \bar{Q}_{n}^{k}\)</span>.</p></li>
<li><p>The resulting estimator is the <strong>super learner</strong></p></li>
<li><p>We used cross-validation to find the best convex combination of candidate estimators; how to estimate the risk of the super learner?</p></li>
<li><p>Can also estimate the risk of the super learner using cross-validation.</p>
<ul>
<li>First fit super learner in training sample (using nested cross-validation), then evaluate risk in validation sample. Repeat <span class="math inline">\(V\)</span> times.</li>
<li>In R: function <code>CV.SuperLearner</code> splits the data into <span class="math inline">\(V\)</span> folds and then calls <code>SuperLearner</code> on each fold</li>
</ul></li>
</ul>
</section>
<section id="nested-cross-validation" class="slide level2">
<h2>Nested cross-validation</h2>

<img data-src="figs/nestedcv.png" class="quarto-figure quarto-figure-center r-stretch"><p>Figure from <a href="https://arxiv.org/pdf/1811.12808">Raschka 2018</a>.</p>
</section>
<section id="steps-in-super-learning" class="slide level2 scrollable">
<h2>Steps in Super Learning</h2>
<ul>
<li>0: Choose a library of candidate algorithms</li>
<li>1: Split data into <span class="math inline">\(V\)</span> folds</li>
<li>2: Estimate each algorithm‚Äôs CV risk
<ul>
<li>The estimator with the lowest CV risk is the discrete super learner</li>
<li>Can stop here and use the discrete super learner (function) as our estimate of <span class="math inline">\(\bar{Q}_{0}\)</span></li>
</ul></li>
<li><ol start="3" type="1">
<li>Estimate convex combination of candidate estimators</li>
</ol>
<ul>
<li>The estimated convex combination is the super learner</li>
<li>Use the super learner (function) as our estimate of <span class="math inline">\(\bar{Q}_{0}\)</span></li>
<li>Can also estimate the risk of the super learner using nested cross-validation</li>
</ul></li>
</ul>
</section>
<section id="discrete-super-learner-1" class="slide level2">
<h2>Discrete Super Learner</h2>

<img data-src="figs/discretesl.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="super-learner-2" class="slide level2">
<h2>Super Learner</h2>

<img data-src="figs/slmor.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="simulation-example" class="slide level2">
<h2>Simulation example</h2>
<ul>
<li>Simulate from <span class="math inline">\(4\)</span> functions with noise added:</li>
</ul>
<p><span class="math display">\[\begin{align*}
Y &amp;= -2 \cdot \mathbf{1}(X &lt; -3) + 2.55 \cdot \mathbf{1}(X &gt; -2) -
2 \cdot \mathbf{1}(X &gt; 0)  \\
&amp; + 4 \cdot \mathbf{1}(X &gt; 2) - 1 \cdot \mathbf{1}(X &gt; 3) +u \\
Y &amp;= 6 + 0.4X - 0.36X^2 + 0.005X^3 + u \\
Y &amp;= 2.83 \sin\left(\frac{\pi}{2} X\right) +u \\
Y &amp;= 4 \sin(3\pi X) \cdot \mathbf{1}(X &gt; 0) + u
\end{align*}\]</span> where <span class="math inline">\(u \sim N(0, 1)\)</span> and <span class="math inline">\(X \sim \mathrm{Unif}(-4, 4)\)</span></p>
<ul>
<li>Optimal <span class="math inline">\(R^{2}\)</span> equal to <span class="math inline">\(R^{2}_{opt} = 1 - \frac{1}{\mathrm{Var}(Y)}\)</span>; <span class="math inline">\(\mathrm{Var}(Y)\)</span> chosen such that <span class="math inline">\(R^{2}_{opt} = 0.8\)</span></li>
</ul>
</section>
<section id="simulation-example-1" class="slide level2">
<h2>Simulation example</h2>

<img data-src="figs/vdlsim.png" class="r-stretch"></section>
<section id="simulation-example-2" class="slide level2">
<h2>Simulation example</h2>
<ul>
<li>Construct ensemble of algorithms</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a>gam_learners <span class="ot">&lt;-</span> <span class="fu">create.Learner</span>(</span>
<span id="cb1-2"><a href=""></a>  <span class="st">"SL.gam"</span>, <span class="at">tune =</span> <span class="fu">list</span>(<span class="at">deg.gam =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb1-3"><a href=""></a>)</span>
<span id="cb1-4"><a href=""></a>bag_learners <span class="ot">&lt;-</span> <span class="fu">create.Learner</span>(</span>
<span id="cb1-5"><a href=""></a>  <span class="st">"SL.ipredbagg"</span>, <span class="at">tune =</span> <span class="fu">list</span>(<span class="at">cp =</span> <span class="fu">c</span>(<span class="fl">0.0</span>, <span class="fl">0.1</span>, <span class="fl">0.01</span>))</span>
<span id="cb1-6"><a href=""></a>)</span>
<span id="cb1-7"><a href=""></a>nn_learners <span class="ot">&lt;-</span> <span class="fu">create.Learner</span>(</span>
<span id="cb1-8"><a href=""></a>  <span class="st">"SL.nnet"</span>, <span class="at">tune =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</span>
<span id="cb1-9"><a href=""></a>)</span>
<span id="cb1-10"><a href=""></a>loess_learners <span class="ot">&lt;-</span> <span class="fu">create.Learner</span>(</span>
<span id="cb1-11"><a href=""></a>  <span class="st">"SL.loess"</span>, <span class="at">tune =</span> <span class="fu">list</span>(<span class="at">span =</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.5</span>, <span class="fl">0.25</span>, <span class="fl">0.1</span>))</span>
<span id="cb1-12"><a href=""></a>)</span>
<span id="cb1-13"><a href=""></a>all_learners <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-14"><a href=""></a>  gam_learners<span class="sc">$</span>names,</span>
<span id="cb1-15"><a href=""></a>  nn_learners<span class="sc">$</span>names,</span>
<span id="cb1-16"><a href=""></a>  bag_learners<span class="sc">$</span>names,</span>
<span id="cb1-17"><a href=""></a>  loess_learners<span class="sc">$</span>names,</span>
<span id="cb1-18"><a href=""></a>  <span class="st">"SL.randomForest"</span>,</span>
<span id="cb1-19"><a href=""></a>  <span class="st">"SL.xgboost"</span>,</span>
<span id="cb1-20"><a href=""></a>  <span class="st">"SL.glm"</span>,</span>
<span id="cb1-21"><a href=""></a>  <span class="st">"SL.polymars"</span></span>
<span id="cb1-22"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="simulation-example-3" class="slide level2">
<h2>Simulation example</h2>
<ul>
<li>Estimate Super Learner</li>
</ul>

<img data-src="figs/slmor.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="super-learner-fit" class="slide level2">
<h2>Super Learner fit</h2>

<img data-src="figs/vdlsim_fit.png" class="r-stretch"></section>
<section id="weights-of-the-super-learner" class="slide level2">
<h2>Weights of the Super Learner</h2>
<div id="yahxgacfco" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#yahxgacfco table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#yahxgacfco thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#yahxgacfco p { margin: 0; padding: 0; }
 #yahxgacfco .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 20px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #yahxgacfco .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #yahxgacfco .gt_title { color: #333333; font-size: 22px; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #yahxgacfco .gt_subtitle { color: #333333; font-size: 20px; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #yahxgacfco .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #yahxgacfco .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #yahxgacfco .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #yahxgacfco .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #yahxgacfco .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #yahxgacfco .gt_column_spanner_outer:first-child { padding-left: 0; }
 #yahxgacfco .gt_column_spanner_outer:last-child { padding-right: 0; }
 #yahxgacfco .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #yahxgacfco .gt_spanner_row { border-bottom-style: hidden; }
 #yahxgacfco .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #yahxgacfco .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #yahxgacfco .gt_from_md> :first-child { margin-top: 0; }
 #yahxgacfco .gt_from_md> :last-child { margin-bottom: 0; }
 #yahxgacfco .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #yahxgacfco .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #yahxgacfco .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #yahxgacfco .gt_row_group_first td { border-top-width: 2px; }
 #yahxgacfco .gt_row_group_first th { border-top-width: 2px; }
 #yahxgacfco .gt_striped { background-color: rgba(128,128,128,0.05); }
 #yahxgacfco .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #yahxgacfco .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #yahxgacfco .gt_sourcenote { font-size: 20px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #yahxgacfco .gt_left { text-align: left; }
 #yahxgacfco .gt_center { text-align: center; }
 #yahxgacfco .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #yahxgacfco .gt_font_normal { font-weight: normal; }
 #yahxgacfco .gt_font_bold { font-weight: bold; }
 #yahxgacfco .gt_font_italic { font-style: italic; }
 #yahxgacfco .gt_super { font-size: 65%; }
 #yahxgacfco .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #yahxgacfco .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal">Super Learner weights from plot</th>
</tr>
<tr class="gt_col_headings even">
<th id="Algorithm" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Algorithm</th>
<th id="Sim 1" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Sim 1</th>
<th id="Sim 2" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Sim 2</th>
<th id="Sim 3" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Sim 3</th>
<th id="Sim 4" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Sim 4</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.glm</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.randomForest</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.864</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.xgboost</td>
<td class="gt_row gt_right">0.322</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.136</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.ipredbagg(0.00)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.015</td>
<td class="gt_row gt_right">0.212</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.ipredbagg(0.1)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.158</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.ipredbagg(0.01)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(2)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(3)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(4)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(2)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.102</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(3)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.231</td>
<td class="gt_row gt_right">0.061</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(4)</td>
<td class="gt_row gt_right">0.381</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.07</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(5)</td>
<td class="gt_row gt_right">0.206</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.064</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.polymars</td>
<td class="gt_row gt_right">0.091</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.75)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.247</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.5)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.406</td>
<td class="gt_row gt_right">0.255</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.25)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.179</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.1)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
</tbody>
</table>


</div>
        

</section>
<section id="how-well-does-the-super-learner-do" class="slide level2">
<h2>How well does the Super Learner do?</h2>
<ul>
<li>Estimate Super Learner on each outcome for a single simulated dataset</li>
<li>Simulate 100 new datasets and compute <span class="math inline">\(R^2 = 1 - \frac{\sum_{i} (Y_{i} - Y_{i, n})^{2}}{\sum_{i} (Y_{i} -
\bar{Y})^{2}}\)</span>, where <span class="math inline">\(Y_{i,n}\)</span> algorithm prediction and <span class="math inline">\(\bar{Y}\)</span> empirical mean, for:
<ul>
<li>Super Learner</li>
<li>Discrete Super Learner</li>
<li>Each individual algorithm</li>
</ul></li>
<li>Theoretical optimal <span class="math inline">\(R^2\)</span> is <span class="math inline">\(0.8\)</span></li>
<li>Compare the performance of the Super Learner to the individual algorithms</li>
<li>Results are shown in table on next slide</li>
</ul>
</section>
<section id="table-3.2-van-der-laan-and-rose" class="slide level2">
<h2>Table 3.2 van der Laan and Rose</h2>
<div id="lnaokurfou" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#lnaokurfou table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#lnaokurfou thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#lnaokurfou p { margin: 0; padding: 0; }
 #lnaokurfou .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 20px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #lnaokurfou .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #lnaokurfou .gt_title { color: #333333; font-size: 22px; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #lnaokurfou .gt_subtitle { color: #333333; font-size: 20px; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #lnaokurfou .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #lnaokurfou .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #lnaokurfou .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #lnaokurfou .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #lnaokurfou .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #lnaokurfou .gt_column_spanner_outer:first-child { padding-left: 0; }
 #lnaokurfou .gt_column_spanner_outer:last-child { padding-right: 0; }
 #lnaokurfou .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #lnaokurfou .gt_spanner_row { border-bottom-style: hidden; }
 #lnaokurfou .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #lnaokurfou .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #lnaokurfou .gt_from_md> :first-child { margin-top: 0; }
 #lnaokurfou .gt_from_md> :last-child { margin-bottom: 0; }
 #lnaokurfou .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #lnaokurfou .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #lnaokurfou .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #lnaokurfou .gt_row_group_first td { border-top-width: 2px; }
 #lnaokurfou .gt_row_group_first th { border-top-width: 2px; }
 #lnaokurfou .gt_striped { background-color: rgba(128,128,128,0.05); }
 #lnaokurfou .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #lnaokurfou .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #lnaokurfou .gt_sourcenote { font-size: 20px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #lnaokurfou .gt_left { text-align: left; }
 #lnaokurfou .gt_center { text-align: center; }
 #lnaokurfou .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #lnaokurfou .gt_font_normal { font-weight: normal; }
 #lnaokurfou .gt_font_bold { font-weight: bold; }
 #lnaokurfou .gt_font_italic { font-style: italic; }
 #lnaokurfou .gt_super { font-size: 65%; }
 #lnaokurfou .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #lnaokurfou .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="9" class="gt_heading gt_title gt_font_normal">Simulation results for N = 100 simulations</th>
</tr>
<tr class="gt_col_headings gt_spanner_row even">
<th rowspan="2" id="Algorithm" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Algorithm</th>
<th colspan="2" id="Sim 1" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Sim 1</span></th>
<th colspan="2" id="Sim 2" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Sim 2</span></th>
<th colspan="2" id="Sim 3" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Sim 3</span></th>
<th colspan="2" id="Sim 4" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Sim 4</span></th>
</tr>
<tr class="gt_col_headings header">
<th id="R¬≤" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">R¬≤</th>
<th id="SE(R¬≤)" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">SE(R¬≤)</th>
<th id="R¬≤" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">R¬≤</th>
<th id="SE(R¬≤)" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">SE(R¬≤)</th>
<th id="R¬≤" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">R¬≤</th>
<th id="SE(R¬≤)" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">SE(R¬≤)</th>
<th id="R¬≤" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">R¬≤</th>
<th id="SE(R¬≤)" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">SE(R¬≤)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" style="border-top: 2px solid black">Super Learner</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.746</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.004</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.782</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.004</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.734</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.005</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.477</td>
<td class="gt_row gt_center" style="border-top: 2px solid black">0.005</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th" style="border-bottom: 2px solid black">Discrete SL</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.755</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.004</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.78</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.004</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.718</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.005</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.489</td>
<td class="gt_row gt_center" style="border-bottom: 2px solid black">0.006</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.glm</td>
<td class="gt_row gt_center">0.403</td>
<td class="gt_row gt_center">0.008</td>
<td class="gt_row gt_center">0.185</td>
<td class="gt_row gt_center">0.011</td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">0.006</td>
<td class="gt_row gt_center">-0.013</td>
<td class="gt_row gt_center">0.002</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.randomForest</td>
<td class="gt_row gt_center">0.728</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.741</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.739</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.489</td>
<td class="gt_row gt_center">0.006</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.xgboost</td>
<td class="gt_row gt_center">0.701</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.704</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.678</td>
<td class="gt_row gt_center">0.006</td>
<td class="gt_row gt_center">0.4</td>
<td class="gt_row gt_center">0.008</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.ipredbagg(0.00)</td>
<td class="gt_row gt_center">0.754</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.754</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.715</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.107</td>
<td class="gt_row gt_center">0.007</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.ipredbagg(0.1)</td>
<td class="gt_row gt_center">0.752</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.755</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.714</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.097</td>
<td class="gt_row gt_center">0.008</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.ipredbagg(0.01)</td>
<td class="gt_row gt_center">0.755</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.754</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.715</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.11</td>
<td class="gt_row gt_center">0.007</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(2)</td>
<td class="gt_row gt_center">0.465</td>
<td class="gt_row gt_center">0.007</td>
<td class="gt_row gt_center">0.701</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.237</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">-0.004</td>
<td class="gt_row gt_center">0.003</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(3)</td>
<td class="gt_row gt_center">0.548</td>
<td class="gt_row gt_center">0.006</td>
<td class="gt_row gt_center">0.777</td>
<td class="gt_row gt_center">0.003</td>
<td class="gt_row gt_center">0.409</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">-0.007</td>
<td class="gt_row gt_center">0.005</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(4)</td>
<td class="gt_row gt_center">0.609</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.785</td>
<td class="gt_row gt_center">0.003</td>
<td class="gt_row gt_center">0.544</td>
<td class="gt_row gt_center">0.006</td>
<td class="gt_row gt_center">-0.013</td>
<td class="gt_row gt_center">0.006</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(2)</td>
<td class="gt_row gt_center">0.653</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.618</td>
<td class="gt_row gt_center">0.007</td>
<td class="gt_row gt_center">0.334</td>
<td class="gt_row gt_center">0.007</td>
<td class="gt_row gt_center">-0.036</td>
<td class="gt_row gt_center">0.012</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(3)</td>
<td class="gt_row gt_center">0.716</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.769</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.721</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">-0.012</td>
<td class="gt_row gt_center">0.013</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(4)</td>
<td class="gt_row gt_center">0.716</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.768</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.718</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.024</td>
<td class="gt_row gt_center">0.009</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.nnet(5)</td>
<td class="gt_row gt_center">0.722</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.759</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.763</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">-3.2</td>
<td class="gt_row gt_center">0.274</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.polymars</td>
<td class="gt_row gt_center">0.72</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.768</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.758</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">-0.041</td>
<td class="gt_row gt_center">0.008</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.75)</td>
<td class="gt_row gt_center">0.586</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.786</td>
<td class="gt_row gt_center">0.003</td>
<td class="gt_row gt_center">0.449</td>
<td class="gt_row gt_center">0.009</td>
<td class="gt_row gt_center">-0.02</td>
<td class="gt_row gt_center">0.006</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.5)</td>
<td class="gt_row gt_center">0.654</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.78</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.646</td>
<td class="gt_row gt_center">0.007</td>
<td class="gt_row gt_center">-0.013</td>
<td class="gt_row gt_center">0.006</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.25)</td>
<td class="gt_row gt_center">0.697</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.769</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.767</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">-0.097</td>
<td class="gt_row gt_center">0.007</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.loess(0.1)</td>
<td class="gt_row gt_center">0.705</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.734</td>
<td class="gt_row gt_center">0.004</td>
<td class="gt_row gt_center">0.73</td>
<td class="gt_row gt_center">0.005</td>
<td class="gt_row gt_center">0.538</td>
<td class="gt_row gt_center">0.009</td>
</tr>
</tbody>
</table>


</div>
        

</section>
<section id="table-3.2-van-der-laan-and-rose-1" class="slide level2">
<h2>Table 3.2 van der Laan and Rose</h2>

<img data-src="figs/tab-vdlrose.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="empirical-example-sl-tmle" class="slide level2">
<h2>Empirical example: SL + TMLE</h2>
<ul>
<li><a href="https://www.jstor.org/stable/1806062">Lalonde</a> data
<ul>
<li>Examines the effect of a job training program on employment status</li>
<li>Job training program was run as a field experiment where participants were randomly assigned to treatment and control group</li>
<li>429 controls and 185 treated individuals</li>
</ul></li>
<li>The binary treatment indicator <span class="math inline">\(A\)</span> represents participation in the program</li>
<li>The outcome <span class="math inline">\(Y\)</span> is income in 1978 (continuous)
<ul>
<li>Define also binary outcome <span class="math inline">\(\mathbf{1}(Y &gt; 0)\)</span> (employment status)</li>
</ul></li>
<li>Covariates <span class="math inline">\(W\)</span> include demographic (age, race, marital status) and economic (education, income in 1974, 1975) variables.</li>
<li>Target parameter is still the causal risk difference under causal assumptions <span class="math inline">\(\Psi(Q_{0})\)</span></li>
<li>Use Super Learner + TMLE to estimate parameter of interest.</li>
</ul>
</section>
<section id="lalonde-data" class="slide level2">
<h2>Lalonde data</h2>

<img data-src="figs/income_density.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="empirical-example" class="slide level2">
<h2>Empirical example</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co"># Define outcome (Y), treatment (A), and covariates (W)</span></span>
<span id="cb2-2"><a href=""></a>Y <span class="ot">&lt;-</span> df<span class="sc">$</span>Y</span>
<span id="cb2-3"><a href=""></a>A <span class="ot">&lt;-</span> df<span class="sc">$</span>treat</span>
<span id="cb2-4"><a href=""></a>W <span class="ot">&lt;-</span> df[, <span class="fu">c</span>(</span>
<span id="cb2-5"><a href=""></a>  <span class="st">"age"</span>, <span class="st">"educ"</span>, <span class="st">"black"</span>, <span class="st">"hispan"</span>, <span class="st">"married"</span>, <span class="st">"nodegree"</span>, <span class="st">"re74"</span>, <span class="st">"re75"</span></span>
<span id="cb2-6"><a href=""></a>)]</span>
<span id="cb2-7"><a href=""></a>tmle_fit <span class="ot">&lt;-</span> <span class="fu">tmle</span>(</span>
<span id="cb2-8"><a href=""></a>  <span class="at">Y =</span> Y, <span class="at">A =</span> A, <span class="at">W =</span> W,</span>
<span id="cb2-9"><a href=""></a>  <span class="at">Q.SL.library =</span> all_learners,</span>
<span id="cb2-10"><a href=""></a>  <span class="at">g.SL.library =</span> all_learners,</span>
<span id="cb2-11"><a href=""></a>  <span class="at">family =</span> <span class="st">"binomial"</span>,</span>
<span id="cb2-12"><a href=""></a>)</span>
<span id="cb2-13"><a href=""></a><span class="co"># ... and for continuous outcome</span></span>
<span id="cb2-14"><a href=""></a>Y_cont <span class="ot">&lt;-</span> df<span class="sc">$</span>re78</span>
<span id="cb2-15"><a href=""></a>tmle_fit_cont <span class="ot">&lt;-</span> <span class="fu">tmle</span>(</span>
<span id="cb2-16"><a href=""></a>  <span class="at">Y =</span> Y_cont, <span class="at">A =</span> A, <span class="at">W =</span> W,</span>
<span id="cb2-17"><a href=""></a>  <span class="at">Q.SL.library =</span> all_learners,</span>
<span id="cb2-18"><a href=""></a>  <span class="at">g.SL.library =</span> all_learners,</span>
<span id="cb2-19"><a href=""></a>  <span class="at">family =</span> <span class="st">"gaussian"</span>,</span>
<span id="cb2-20"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Note: TMLE also estimates propensity score, <code>g.SL.library</code> argument, to <em>target</em> the initial estimate of <span class="math inline">\(\Psi(Q_{0})\)</span> towards the TMLE (the influence function contains the propensity score)</li>
</ul>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>
<div id="hgzfdmunzv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#hgzfdmunzv table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#hgzfdmunzv thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#hgzfdmunzv p { margin: 0; padding: 0; }
 #hgzfdmunzv .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 20px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #hgzfdmunzv .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #hgzfdmunzv .gt_title { color: #333333; font-size: 22px; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #hgzfdmunzv .gt_subtitle { color: #333333; font-size: 20px; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #hgzfdmunzv .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #hgzfdmunzv .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #hgzfdmunzv .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #hgzfdmunzv .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #hgzfdmunzv .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #hgzfdmunzv .gt_column_spanner_outer:first-child { padding-left: 0; }
 #hgzfdmunzv .gt_column_spanner_outer:last-child { padding-right: 0; }
 #hgzfdmunzv .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #hgzfdmunzv .gt_spanner_row { border-bottom-style: hidden; }
 #hgzfdmunzv .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #hgzfdmunzv .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #hgzfdmunzv .gt_from_md> :first-child { margin-top: 0; }
 #hgzfdmunzv .gt_from_md> :last-child { margin-bottom: 0; }
 #hgzfdmunzv .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #hgzfdmunzv .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #hgzfdmunzv .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #hgzfdmunzv .gt_row_group_first td { border-top-width: 2px; }
 #hgzfdmunzv .gt_row_group_first th { border-top-width: 2px; }
 #hgzfdmunzv .gt_striped { background-color: rgba(128,128,128,0.05); }
 #hgzfdmunzv .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #hgzfdmunzv .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #hgzfdmunzv .gt_sourcenote { font-size: 20px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #hgzfdmunzv .gt_left { text-align: left; }
 #hgzfdmunzv .gt_center { text-align: center; }
 #hgzfdmunzv .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #hgzfdmunzv .gt_font_normal { font-weight: normal; }
 #hgzfdmunzv .gt_font_bold { font-weight: bold; }
 #hgzfdmunzv .gt_font_italic { font-style: italic; }
 #hgzfdmunzv .gt_super { font-size: 65%; }
 #hgzfdmunzv .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #hgzfdmunzv .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="3" class="gt_heading gt_title gt_font_normal">TMLE results</th>
</tr>
<tr class="gt_col_headings even">
<th class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="Binary" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Binary</th>
<th id="Continuous" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Continuous</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">Œ®(Q‚ÇÄ)</td>
<td class="gt_row gt_right">0.036</td>
<td class="gt_row gt_right">640.886</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">CI lower</td>
<td class="gt_row gt_right">-0.017</td>
<td class="gt_row gt_right">-104.296</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">CI upper</td>
<td class="gt_row gt_right">0.09</td>
<td class="gt_row gt_right">1386.068</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">p-value</td>
<td class="gt_row gt_right">0.183</td>
<td class="gt_row gt_right">0.092</td>
</tr>
</tbody>
</table>


</div>
        

<div id="cwjnxigzls" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#cwjnxigzls table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#cwjnxigzls thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#cwjnxigzls p { margin: 0; padding: 0; }
 #cwjnxigzls .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 20px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #cwjnxigzls .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #cwjnxigzls .gt_title { color: #333333; font-size: 22px; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #cwjnxigzls .gt_subtitle { color: #333333; font-size: 20px; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #cwjnxigzls .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #cwjnxigzls .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #cwjnxigzls .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #cwjnxigzls .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #cwjnxigzls .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #cwjnxigzls .gt_column_spanner_outer:first-child { padding-left: 0; }
 #cwjnxigzls .gt_column_spanner_outer:last-child { padding-right: 0; }
 #cwjnxigzls .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #cwjnxigzls .gt_spanner_row { border-bottom-style: hidden; }
 #cwjnxigzls .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #cwjnxigzls .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #cwjnxigzls .gt_from_md> :first-child { margin-top: 0; }
 #cwjnxigzls .gt_from_md> :last-child { margin-bottom: 0; }
 #cwjnxigzls .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #cwjnxigzls .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 20px; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #cwjnxigzls .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #cwjnxigzls .gt_row_group_first td { border-top-width: 2px; }
 #cwjnxigzls .gt_row_group_first th { border-top-width: 2px; }
 #cwjnxigzls .gt_striped { background-color: rgba(128,128,128,0.05); }
 #cwjnxigzls .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #cwjnxigzls .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #cwjnxigzls .gt_sourcenote { font-size: 20px; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #cwjnxigzls .gt_left { text-align: left; }
 #cwjnxigzls .gt_center { text-align: center; }
 #cwjnxigzls .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #cwjnxigzls .gt_font_normal { font-weight: normal; }
 #cwjnxigzls .gt_font_bold { font-weight: bold; }
 #cwjnxigzls .gt_font_italic { font-style: italic; }
 #cwjnxigzls .gt_super { font-size: 65%; }
 #cwjnxigzls .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #cwjnxigzls .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="3" class="gt_heading gt_title gt_font_normal">Super Learner weights</th>
</tr>
<tr class="gt_col_headings even">
<th class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col"></th>
<th id="Binary" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Binary</th>
<th id="Continuous" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Continuous</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(2)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.036</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(3)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.492</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.gam(4)</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.randomForest</td>
<td class="gt_row gt_right">0.272</td>
<td class="gt_row gt_right">0.472</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.xgboost</td>
<td class="gt_row gt_right">0.0</td>
<td class="gt_row gt_right">0.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_stub" data-quarto-table-cell-role="th">SL.glm</td>
<td class="gt_row gt_right">0.728</td>
<td class="gt_row gt_right">0.0</td>
</tr>
</tbody>
</table>


</div>
        

</section>
<section id="interpretation" class="slide level2">
<h2>Interpretation</h2>
<p><span class="math inline">\(\text{HtmlTable} \mapsto \texttt{Prompt}(\text{f"Please
  interpret the results:\n{HtmlTable}"})\)</span>:</p>
<ul>
<li>Binary Outcome (Employment in 1978)
<ul>
<li>The estimated risk difference (Œ®(Q‚ÇÄ)) is 0.036, meaning the training program increased the probability of employment by 3.6 percentage points.<br>
</li>
<li>The confidence interval (-1.7% to 9.0%) includes zero, and the p-value (0.183) suggests no statistically significant effect.</li>
</ul></li>
<li>Continuous Outcome (Earnings in 1978)
<ul>
<li>The estimated income increase due to the training program is $641 on average.<br>
</li>
<li>The confidence interval (-$104 to $1386) is wide, and the p-value (0.092) suggests a marginally significant effect.</li>
</ul></li>
</ul>
</section>
<section id="ressources-references" class="slide level2">
<h2>Ressources / references</h2>
<ul>
<li>Code on github <a href="https://github.com/jsr-p/super-learner-tl/blob/main/">here</a></li>
<li><a href="https://www.khstats.com/blog/sl/superlearning#superlearning-step-by-step">An Illustrated Guide to Superlearning</a></li>
<li>Chapter 3 in van der Laan and Rose (2011)</li>
<li><a href="https://vanderlaan-lab.org/teach-files/BASS_sec1_3.1.pdf">Slides</a> by Eric Polley (found via van der Laan lab <a href="https://vanderlaan-lab.org/teaching/">website</a>)</li>
<li><a href="https://cran.r-project.org/web/packages/SuperLearner/index.html">SuperLearner</a> package
<ul>
<li><a href="https://cran.r-project.org/web/packages/SuperLearner/vignettes/Guide-to-SuperLearner.html">SuperLearner vignette</a></li>
</ul></li>
<li><a href="https://www.jstatsoft.org/article/view/v051i13">tmle</a> package</li>
<li><a href="https://www.degruyter.com/document/doi/10.1524/stnd.2006.24.3.351/html">van der Vaart, Dudoit &amp; van der Laan (2006)</a></li>
</ul>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>